<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Asta4D Framework &#12518;&#12540;&#12470;&#12460;&#12452;&#12489;</title><link rel="stylesheet" type="text/css" href="css/manual-singlepage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="asta4d-user-guide-jp"></a>Asta4D Framework &#12518;&#12540;&#12470;&#12460;&#12452;&#12489;</h1></div><div><div class="authorgroup"><h2>Authors</h2>
      <span class="author"><span class="firstname">Shunsuke</span> <span class="surname">Otani</span></span>	  
      , <span class="author"><span class="firstname">Rui</span> <span class="surname">Liu</span></span>
    </div></div><div><p class="releaseinfo">0.1</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="part"><a href="#asta4d-introduction">I. Asta4D&#12398;&#27010;&#35201;</a></span></dt><dt><span class="part"><a href="#asta4d-functionality">II. Asta4D&#12398;&#27231;&#33021;</a></span></dt></dl></div>
  

  

  

  <div class="part"><div class="titlepage"><div><div><h1 class="title"><a name="asta4d-introduction"></a>Part&nbsp;I.&nbsp;Asta4D&#12398;&#27010;&#35201;</h1></div></div></div>
    

    <div class="partintro"><div></div>
      <p>Asta4D&#12399;&#12487;&#12470;&#12452;&#12531;&#12501;&#12524;&#12531;&#12489;&#12522;&#12540;&#12392;&#38283;&#30330;&#12395;&#26580;&#36575;&#24615;&#12434;&#25345;&#12383;&#12379;&#12427;&#12392;&#12356;&#12358;&#29305;&#24500;&#12434;&#25345;&#12388;WEB
      &#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12391;&#12377;&#12290;</p>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="overview"></a>1.&nbsp;Asta4D&#12398;&#32057;&#20171;</h2></div></div></div>
  

  <p>Asta4D&#12399;&#26377;&#21517;&#12394;Scala&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12391;&#12354;&#12427;Lift&#12363;&#12425;&#12452;&#12531;&#12473;&#12500;&#12524;&#12540;&#12471;&#12519;&#12531;&#12434;&#21463;&#12369;&#12289;Lift&#12398;Java&#29256;&#12398;&#12424;&#12358;&#12394;&#20301;&#32622;
  &#12389;&#12369;&#12392;&#12375;&#12390;&#38283;&#30330;&#12373;&#12428;&#12414;&#12375;&#12383;&#12290;Scala&#12434;&#20351;&#29992;&#12375;&#12390;&#12356;&#12427;&#22580;&#21512;&#12395;&#12399;Lift&#12434;&#36984;&#25246;&#12377;&#12427;&#12371;&#12392;&#12434;&#24375;&#12367;&#25512;&#22888;&#12375;&#12414;&#12377;&#12364;&#12289;Lift&#12398;&#24681;&#24693;&#12434;
  &#21463;&#12369;&#12394;&#12364;&#12425;&#12418;Java&#12434;&#20351;&#29992;&#12375;&#32154;&#12369;&#12383;&#12356;&#22580;&#21512;&#12289;Asta4D&#12364;&#26368;&#21892;&#12398;&#36984;&#25246;&#32930;&#12392;&#12394;&#12426;&#12360;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;
  </p>
  
  <p>&#36942;&#21435;10&#24180;&#38291;&#12395;&#12289;&#27096;&#12293;&#12394;Java&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12364;&#20316;&#12425;&#12428;&#12390;&#12365;&#12414;&#12375;&#12383;&#12290;&#29305;&#12395;MVC&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;&#12392;JSP&#12479;&#12464;&#12522;&#12502;
  &#65288;&#12418;&#12375;&#12367;&#12399;&#20182;&#12398;&#20253;&#32113;&#30340;&#12394;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#25216;&#34899;&#65289;&#12395;&#12424;&#12426;&#12289;&#22823;&#24133;&#12395;&#38283;&#30330;&#21177;&#29575;&#12364;&#19978;&#12364;&#12426;&#12414;&#12375;&#12383;&#12290;&#12375;&#12363;&#12375;&#12289;&#19979;&#35352;&#12398;&#12424;&#12358;&#12394;&#20107;&#26564;&#12364;
  &#12356;&#12414;&#12384;&#12395;&#38283;&#30330;&#32773;&#12398;&#38957;&#12434;&#24745;&#12414;&#12379;&#32154;&#12369;&#12390;&#12356;&#12414;&#12377;&#65306;
  </p>
  
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>&#12506;&#12540;&#12472;&#12477;&#12540;&#12473;&#12395;&#21205;&#30340;&#12467;&#12540;&#12489;&#12364;&#28151;&#22312;&#12375;&#12390;&#12362;&#12426;&#12289;&#12506;&#12540;&#12472;&#12398;&#20877;&#35373;&#35336;&#12420;&#12524;&#12452;&#12450;&#12454;&#12488;&#35519;&#25972;&#12434;&#34892;&#12358;&#22952;&#12370;&#12395;&#12394;&#12427;&#12392;
	  &#12487;&#12470;&#12452;&#12490;&#12540;&#12420;&#12501;&#12525;&#12531;&#12488;&#12456;&#12531;&#12489;&#12456;&#12531;&#12472;&#12491;&#12450;&#12363;&#12425;&#19981;&#28288;&#12434;&#25345;&#12383;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;&#21516;&#27096;&#12395;&#12289;&#12487;&#12470;&#12452;&#12490;&#12540;&#12420;&#12501;&#12525;&#12531;&#12488;&#12456;&#12531;&#12489;&#12456;&#12531;&#12472;&#12491;&#12450;
	  &#12364;&#12506;&#12540;&#12472;&#12398;&#20877;&#35373;&#35336;&#12392;&#12524;&#12452;&#12450;&#12454;&#12488;&#35519;&#25972;&#12434;&#34892;&#12358;&#12383;&#12403;&#12395;&#12506;&#12540;&#12472;&#12477;&#12540;&#12473;&#12395;&#22475;&#12417;&#36796;&#12414;&#12428;&#12383;&#21205;&#30340;&#12467;&#12540;&#12489;&#12398;&#25369;&#21205;&#12434;&#22730;&#12375;&#12390;&#12375;&#12414;&#12358;
	  &#12371;&#12392;&#12364;&#12496;&#12483;&#12463;&#12456;&#12531;&#12489;&#12456;&#12531;&#12472;&#12491;&#12450;&#12398;&#19981;&#28288;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290;&#12477;&#12540;&#12473;&#12398;&#12522;&#12501;&#12449;&#12463;&#12479;&#12522;&#12531;&#12464;&#12395;&#22823;&#12365;&#12394;&#12467;&#12473;&#12488;&#12363;&#12369;&#12390;&#12414;&#12391;&#12506;&#12540;&#12472;&#12398;&#20877;&#35373;&#35336;
	  &#12420;&#26032;&#12375;&#12356;&#12506;&#12540;&#12472;&#12398;&#35373;&#35336;&#12395;&#21512;&#12431;&#12379;&#12427;&#12371;&#12392;&#12399;&#22256;&#38627;&#12391;&#12354;&#12427;&#12383;&#12417;&#12391;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>&#38283;&#30330;&#32773;&#12399;&#12289;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#35328;&#35486;&#12398;&#27231;&#33021;&#12364;&#36007;&#24369;&#12391;&#12354;&#12427;&#12371;&#12392;&#12395;&#19981;&#28288;&#12434;&#25265;&#12356;&#12390;&#12362;&#12426;&#12289;&#35079;&#38609;&#12394;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12525;&#12472;&#12483;&#12463;&#12398;
	  &#12383;&#12417;&#12395;&#27096;&#12293;&#12394;&#12362;&#12414;&#12376;&#12394;&#12356;&#12398;&#12424;&#12358;&#12394;&#12467;&#12540;&#12489;&#12434;&#26360;&#12367;&#12371;&#12392;&#12395;&#30130;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>&#38283;&#30330;&#32773;&#12399;MVC&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;&#12398;&#29983;&#29987;&#24615;&#12364;&#39640;&#12367;&#12394;&#12356;&#12371;&#12392;&#12395;&#19981;&#28288;&#12434;&#25265;&#12356;&#12390;&#12362;&#12426;&#12289;PHP&#12420;ASP&#12398;&#12424;&#12358;&#12394;&#12424;&#12426;&#21177;&#29575;&#12398;&#33391;&#12356;
	  &#25163;&#27861;&#12434;&#27714;&#12417;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
    </li></ul></div>
  
  <p>Asta4D&#12399;&#12371;&#12428;&#12425;&#12398;&#21839;&#38988;&#28857;&#12395;&#23550;&#12377;&#12427;&#12477;&#12522;&#12517;&#12540;&#12471;&#12519;&#12531;&#12391;&#12377;&#12290;&#25105;&#12293;&#12399;Lift&#12363;&#12425;&#12383;&#12367;&#12373;&#12435;&#12398;&#12371;&#12392;&#12434;&#23398;&#12403;&#12289;&#12381;&#12428;&#12425;&#12434;Java&#12398;&#19990;&#30028;&#12395;
  &#12418;&#12383;&#12425;&#12381;&#12358;&#12392;&#35430;&#12415;&#12390;&#12356;&#12414;&#12377;&#12290;Asta4D&#12399;&#19979;&#35352;&#12398;&#28857;&#12395;&#28966;&#28857;&#12434;&#24403;&#12390;&#20316;&#12425;&#12428;&#12414;&#12375;&#12383;&#12290;
  </p>
  
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12392;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#20998;&#38626;</p>
	  <p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12395;&#12399;&#21205;&#30340;&#12394;&#12467;&#12540;&#12489;&#12364;&#21547;&#12414;&#12428;&#12414;&#12379;&#12435;&#12290;Asta4D&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12399;&#24120;&#12395;&#12501;&#12525;&#12531;&#12488;&#12456;&#12531;&#12489;&#12456;&#12531;&#12472;&#12491;&#12450;&#12364;
	  &#12513;&#12531;&#12486;&#12490;&#12531;&#12473;&#12375;&#26131;&#12356;&#32020;&#31883;&#12394;HTML&#12501;&#12449;&#12452;&#12523;&#12391;&#12377;&#12290;&#38750;&#24120;&#12395;&#12487;&#12470;&#12452;&#12531;&#12501;&#12524;&#12531;&#12489;&#12522;&#12540;&#12391;&#12354;&#12426;&#12289;&#25105;&#12293;&#12399;&#12477;&#12540;&#12473;&#12522;&#12501;&#12449;&#12463;&#12479;&#12522;&#12531;&#12464;&#12395;&#35201;&#12377;&#12427;&#20316;&#26989;&#36000;&#33655;&#12434;
	  90%&#20197;&#19978;&#28187;&#12425;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	  </p>
      
      <pre class="programlisting">

<span class="hl-tag">&lt;section&gt;</span>
	<span class="hl-tag">&lt;article&gt;</span>
		<span class="hl-tag">&lt;div</span> <span class="hl-attribute">afd:render</span>=<span class="hl-value">"SimpleSnippet"</span><span class="hl-tag">&gt;</span>dummy text<span class="hl-tag">&lt;/div&gt;</span>
		<span class="hl-tag">&lt;afd:snippet</span> <span class="hl-attribute">render</span>=<span class="hl-value">"SimpleSnippet:setProfile"</span><span class="hl-tag">&gt;</span>
			<span class="hl-tag">&lt;p</span> <span class="hl-attribute">id</span>=<span class="hl-value">"name"</span><span class="hl-tag">&gt;</span>name:<span class="hl-tag">&lt;span&gt;</span>dummy name<span class="hl-tag">&lt;/span&gt;</span><span class="hl-tag">&lt;/p&gt;</span>
			<span class="hl-tag">&lt;p</span> <span class="hl-attribute">id</span>=<span class="hl-value">"age"</span><span class="hl-tag">&gt;</span>age:<span class="hl-tag">&lt;span&gt;</span>0<span class="hl-tag">&lt;/span&gt;</span><span class="hl-tag">&lt;/p&gt;</span>
		<span class="hl-tag">&lt;/afd:snippet&gt;</span>
	<span class="hl-tag">&lt;/article&gt;</span>
<span class="hl-tag">&lt;/section&gt;</span>

      </pre>      
      
      
	  <p>&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12525;&#12472;&#12483;&#12463;&#12399;&#29420;&#31435;&#12394;Java&#12463;&#12521;&#12473;&#12391;&#23455;&#35013;&#12375;&#12390;&#12356;&#12414;&#12377;&#12398;&#12391;&#12289;&#38283;&#30330;&#32773;&#12399;&#26032;&#12375;&#12356;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#35328;&#35486;&#12398;&#32722;&#24471;&#12364;&#35201;&#12425;&#12394;&#12367;&#12289;
	  &#12356;&#12388;&#12418;&#24931;&#12428;&#12390;&#12356;&#12427;Java&#12398;&#12414;&#12414;&#12391;&#38283;&#30330;&#12375;&#12289;Java&#35328;&#35486;&#12398;&#12501;&#12540;&#12523;&#12497;&#12527;&#12540;&#12434;&#21033;&#29992;&#12391;&#12365;&#12427;&#12290;
	  </p>
	  
      <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> SimpleSnippet {

    <span class="hl-keyword">public</span> Renderer render(String name) {
        <span class="hl-keyword">if</span> (StringUtils.isEmpty(name)) {
            name = <span class="hl-string">"Asta4D"</span>;
        }
        Element element = 
ElementUtil.parseAsSingle(<span class="hl-string">"&lt;span&gt;Hello "</span> + name + <span class="hl-string">"!&lt;/span&gt;"</span>);
        <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">"*"</span>, element);
    }

    <span class="hl-keyword">public</span> Renderer setProfile() {
        Renderer render = <span class="hl-keyword">new</span> GoThroughRenderer();
        render.add(<span class="hl-string">"p#name span"</span>, <span class="hl-string">"asta4d"</span>);
        render.add(<span class="hl-string">"p#age span"</span>, <span class="hl-string">"20"</span>);
        <span class="hl-keyword">return</span> render;
    }
}


      </pre>
	  
    </li><li class="listitem">
      <p>&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12434;&#24517;&#35201;&#12392;&#12375;&#12394;&#12356;View First&#12392;&#20351;&#12356;&#12420;&#12377;URL&#12510;&#12483;&#12481;&#12531;&#12464;&#20181;&#32068;&#12415;</p>
      <p>&#25105;&#12293;&#12399;MVC&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;&#12364;&#20553;&#22823;&#12391;&#12497;&#12527;&#12501;&#12523;&#12391;&#12354;&#12427;&#12392;&#32771;&#12360;&#12390;&#12356;&#12414;&#12377;&#12364;&#12289;&#29983;&#29987;&#24615;&#12364;&#39640;&#12367;&#12399;&#12394;&#12356;&#12392;&#12418;&#32771;&#12360;&#12390;&#12356;&#12414;&#12377;&#12290;&#38263;&#24180;Java&#12456;&#12531;&#12472;&#12491;&#12450;&#12399;
      PHP&#12420;ASP&#12398;&#12424;&#12358;&#12394;&#12424;&#12426;&#21177;&#29575;&#12398;&#33391;&#12356;&#25163;&#27861;&#12434;&#27714;&#12417;&#32154;&#12369;&#12390;&#12356;&#12414;&#12375;&#12383;&#12290;&#20253;&#32113;&#30340;&#12394;PHP/ASP&#12391;&#12398;&#38283;&#30330;&#12364;&#21177;&#29575;&#12364;&#33391;&#12356;&#29702;&#30001;&#12399;&#12300;View First&#12301;&#12392;&#21628;&#12400;&#12428;&#12427;
      &#35299;&#27770;&#31574;&#12395;&#12424;&#12427;&#12418;&#12398;&#12391;&#12377;&#12290;View First&#12398;&#38283;&#30330;&#12473;&#12479;&#12452;&#12523;&#12391;&#12399;&#12289;&#38283;&#30330;&#32773;&#12399;PHP/ASP&#12398;&#20253;&#32113;&#30340;&#12394;&#38283;&#30330;&#26041;&#27861;&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12506;&#12540;&#12472;&#12398;&#34920;&#31034;&#32080;&#26524;&#12434;&#21069;&#25552;&#12392;&#12375;&#12390;
      &#12525;&#12472;&#12483;&#12463;&#12434;&#23455;&#35013;&#12375;&#12414;&#12377;&#12290;
      </p>
      
      <p>&#22810;&#12367;&#12398;&#20154;&#12399;&#34920;&#31034;&#32080;&#26524;&#12434;&#21069;&#25552;&#12392;&#12375;&#12383;&#22580;&#25152;&#12395;&#21205;&#30340;&#12467;&#12540;&#12489;&#12434;&#23455;&#35013;&#12377;&#12427;&#12371;&#12392;&#12399;&#12289;&#12477;&#12540;&#12473;&#12364;&#12424;&#12426;&#35079;&#38609;&#12395;&#12394;&#12426;&#29702;&#35299;&#12364;&#22256;&#38627;&#12395;&#12394;&#12427;&#12392;&#35328;&#12358;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;
      &#12381;&#12398;&#20027;&#24373;&#12399;&#38291;&#36949;&#12387;&#12390;&#12399;&#12356;&#12414;&#12379;&#12435;&#12364;&#12289;Asta4D&#12391;&#12399;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12392;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12525;&#12472;&#12483;&#12463;&#12392;&#12434;&#20998;&#38626;&#12375;&#12390;&#12356;&#12427;&#12383;&#12417;&#21839;&#38988;&#12392;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;&#29983;&#29987;&#24615;&#12398;&#38754;&#12391;&#12399;&#12289;
      &#38283;&#30330;&#32773;&#12399;&#35079;&#38609;&#12394;&#12477;&#12540;&#12473;&#12398;&#27083;&#25104;&#12434;&#27671;&#12395;&#12377;&#12427;&#12371;&#12392;&#12394;&#12367;&#26412;&#36074;&#30340;&#12394;&#38283;&#30330;&#12395;&#23554;&#24565;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
      </p>
      
      <p>&#21516;&#26178;&#12395;&#12289;Asta4D&#12399;&#20351;&#12356;&#12420;&#12377;&#12356;URL&#12510;&#12483;&#12481;&#12531;&#12464;&#12523;&#12540;&#12523;&#12434;&#35373;&#23450;&#12377;&#12427;API&#12418;&#25552;&#20379;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

      <pre class="programlisting">


        rules.add(<span class="hl-string">"/app/"</span>, <span class="hl-string">"/templates/index.html"</span>);

        rules.add(<span class="hl-string">"/app/handler"</span>)
             .handler(LoginHandler.<span class="hl-keyword">class</span>)
             .handler(EchoHandler.<span class="hl-keyword">class</span>)
             .forward(LoginFailure.<span class="hl-keyword">class</span>, <span class="hl-string">"/templates/error.html"</span>)
             .forward(<span class="hl-string">"/templates/success.html"</span>);



      </pre>
      
    </li><li class="listitem">
      <p>&#31777;&#21336;&#12363;&#12388;&#26580;&#36575;&#12394;&#20966;&#29702;&#12501;&#12525;&#12540;</p>
      
      <p>Asta4D&#12395;&#12399;&#12289;&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;&#29305;&#23450;&#12398;Request&#12395;&#23550;&#12375;&#12390;&#12289;&#29305;&#23450;&#12394;&#36012;&#20219;&#32773;&#12364;&#12354;&#12427;&#12392;&#32771;&#12360;&#12390;&#12289;
      request handler&#12392;&#12356;&#12358;&#20181;&#32068;&#12415;&#12434;&#29992;&#24847;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;request handler&#12399;&#12356;&#12388;&#12418;&#29305;&#23450;&#12398;request&#12395;&#12424;&#12387;&#12390;
      &#29305;&#23450;&#12394;&#32080;&#26524;&#12434;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12395;&#25147;&#12381;&#12358;&#12392;&#25285;&#24403;&#12375;&#12390;&#12356;&#12427;&#37096;&#21697;&#12391;&#12377;&#12290;</p>
      
      <p>&#12381;&#12375;&#12390;&#12289;Ajax&#12418;&#12375;&#12367;&#12399;Restful&#12398;Request&#12399;&#31777;&#21336;&#12395;request handler&#12395;&#20219;&#12379;&#12425;&#12428;&#12414;&#12377;&#12290;</p>
      
      <p>JSON:</p>
      <pre class="programlisting">


rules.add(<span class="hl-string">"/app/ajax/getUserList"</span>).handler(GetUserListHandler.<span class="hl-keyword">class</span>).json();

<span class="hl-comment">//...</span>

<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> GetUserListHandler {

    <em><span class="hl-annotation" style="color: gray">@RequestHandler</span></em>
    <span class="hl-keyword">public</span> List&lt;String&gt; queryUserList() {
        <span class="hl-keyword">return</span> Arrays.asList(<span class="hl-string">"otani"</span>, <span class="hl-string">"ryu"</span>, <span class="hl-string">"mizuhara"</span>);
    }
}



      </pre>

      <p>Restful:</p>
      <pre class="programlisting">


rules.add(PUT, <span class="hl-string">"/app/ajax/addUser"</span>).handler(AddUserHandler.<span class="hl-keyword">class</span>).rest();

<span class="hl-comment">//...</span>

<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> AddUserHandler {

    <em><span class="hl-annotation" style="color: gray">@RequestHandler</span></em>
    <span class="hl-keyword">public</span> HeaderInfo doAdd(String newUserName) {
        <span class="hl-comment">// some logic that should add a new user by the given name</span>
        <span class="hl-comment">// ...</span>
        <span class="hl-keyword">return</span> <span class="hl-keyword">new</span> HeaderInfo(<span class="hl-number">200</span>);
    }
}



      </pre>

    </li><li class="listitem">
      <p>request handler&#12434;&#29992;&#12356;&#12383;&#21103;&#20316;&#29992;&#12398;&#20998;&#38626;&#12392;&#12510;&#12523;&#12481;&#12473;&#12524;&#12483;&#12489;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;</p>
      
      <p>&#12471;&#12473;&#12486;&#12512;&#19978;&#12395;&#12300;&#21103;&#20316;&#29992;&#12434;&#20276;&#12358;&#25369;&#21205;&#12301;&#12392;&#12300;&#21103;&#20316;&#29992;&#12434;&#20276;&#12431;&#12394;&#12356;&#25369;&#21205;&#12301;&#12392;&#21628;&#12400;&#12428;&#12390;&#12356;&#12427;&#20108;&#12388;&#12479;&#12452;&#12503;&#12398;&#25805;&#20316;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
      &#12471;&#12473;&#12486;&#12512;&#12398;&#29366;&#24907;&#12434;&#22793;&#26356;&#12377;&#12427;&#12424;&#12358;&#12394;&#20316;&#29992;&#12398;&#12354;&#12427;&#25369;&#21205;&#12434;&#12289;&#12300;&#21103;&#20316;&#29992;&#12434;&#20276;&#12358;&#25369;&#21205;&#12301;&#12392;&#21628;&#12406;&#12371;&#12392;&#12395;&#12375;&#12414;&#12377;&#12290;&#20363;&#12360;&#12400;&#12289;&#21516;&#12376;URL&#12395;&#23550;&#12375;&#12390;
      &#12525;&#12464;&#12452;&#12531;&#12481;&#12455;&#12483;&#12463;&#12364;&#34892;&#12431;&#12428;&#12427;&#22580;&#21512;&#12289;&#12525;&#12464;&#12452;&#12531;&#21069;&#12392;&#35469;&#35388;&#12395;&#25104;&#21151;&#12375;&#12383;&#12525;&#12464;&#12452;&#12531;&#24460;&#12391;&#12399;&#12362;&#12381;&#12425;&#12367;&#30064;&#12394;&#12427;&#12506;&#12540;&#12472;&#12364;&#34920;&#31034;&#12373;&#12428;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;
      &#12371;&#12398;&#12424;&#12358;&#12394;&#12525;&#12464;&#12452;&#12531;&#20966;&#29702;&#12399;&#12300;&#21103;&#20316;&#29992;&#12434;&#20276;&#12358;&#25369;&#21205;&#12301;&#12391;&#12377;&#12290;&#12414;&#12383;&#21029;&#12398;&#20998;&#12363;&#12426;&#12420;&#12377;&#12356;&#20363;&#12392;&#12375;&#12390;&#12399;&#12289;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#26356;&#26032;&#20966;&#29702;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
      &#26356;&#26032;&#20966;&#29702;&#12364;&#12467;&#12511;&#12483;&#12488;&#12373;&#12428;&#12428;&#12400;&#12289;&#12381;&#12428;&#12395;&#38306;&#36899;&#12375;&#12383;&#12506;&#12540;&#12472;&#12399;&#26356;&#26032;&#20966;&#29702;&#21069;&#12392;&#12399;&#30064;&#12394;&#12427;&#34920;&#31034;&#12434;&#12377;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;&#12371;&#12428;&#12418;&#12414;&#12383;&#12300;&#21103;&#20316;&#29992;&#12434;&#20276;&#12358;
      &#25369;&#21205;&#12301;&#12398;&#19968;&#31278;&#12391;&#12377;&#12290;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#26908;&#32034;&#20966;&#29702;&#12399;&#12393;&#12358;&#12391;&#12375;&#12423;&#12358;&#12363;&#12290;&#26908;&#32034;&#20966;&#29702;&#12399;&#21103;&#20316;&#29992;&#12434;&#20276;&#12431;&#12394;&#12356;&#25369;&#21205;&#12391;&#12377;&#12290;&#12371;&#12428;&#12399;&#20309;&#22238;&#26908;&#32034;&#20966;&#29702;&#12434;
      &#34892;&#12387;&#12383;&#12363;&#12395;&#38306;&#12431;&#12425;&#12378;&#12289;&#24120;&#12395;&#21516;&#12376;&#32080;&#26524;&#12434;&#36820;&#12377;&#12371;&#12392;&#12434;&#24847;&#21619;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
      
      <p>&#25105;&#12293;&#12399;&#12289;&#12381;&#12398;&#12300;&#21103;&#20316;&#29992;&#12301;&#12434;&#24910;&#37325;&#30340;&#12395;&#31649;&#29702;&#12377;&#12427;&#12409;&#12365;&#12392;&#24605;&#12356;&#12289;&#20840;&#37096;&#12398;&#12300;&#21103;&#20316;&#29992;&#12301;&#12434;request handler&#12398;&#20181;&#32068;&#12415;&#12391;&#31649;&#29702;&#12375;&#12289;
      &#12499;&#12517;&#12540;&#23652;&#12398;&#27231;&#33021;&#12434;&#32020;&#31883;&#12395;&#12375;&#12289;&#12477;&#12540;&#12473;&#12434;&#12424;&#12426;&#32186;&#40599;&#12391;&#12513;&#12531;&#12486;&#12490;&#12531;&#12473;&#12375;&#26131;&#12367;&#12377;&#12427;&#12424;&#12358;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;&#12371;&#12428;&#12399;&#12289;Asta4D&#12364;&#12402;&#12392;&#12388;&#12398;&#12506;&#12540;&#12472;&#12434;
      &#12510;&#12523;&#12481;&#12473;&#12524;&#12483;&#12489;&#12391;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12377;&#12427;&#12371;&#12392;&#12434;&#23481;&#26131;&#12395;&#12377;&#12427;&#12371;&#12392;&#12418;&#24847;&#21619;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12394;&#12380;&#12394;&#12425;&#12289;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#20966;&#29702;&#12399;&#21103;&#20316;&#29992;&#12363;&#12425;&#35299;&#25918;&#12373;&#12428;&#12390;&#12356;&#12427;&#12363;&#12425;&#12391;&#12377;&#12290;
      </p>
      
      <p>&#20006;&#34892;&#30340;&#12394;snippet&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;</p>
      <pre class="programlisting">


&lt;div afd:render=<span class="hl-string">"ParallelTest$TestRender:snippetInDiv"</span> afd:parallel&gt;
    &lt;div id=<span class="hl-string">"test"</span>&gt;xx&lt;/div&gt;
&lt;/div&gt;

&lt;afd:snippet render=<span class="hl-string">"ParallelTest$TestRender:snippetReplaceDiv"</span> parallel&gt;
    &lt;div id=<span class="hl-string">"test"</span>&gt;xx&lt;/div&gt;
&lt;/afd:snippet&gt;



      </pre>      
      
      <p>&#20006;&#34892;&#30340;&#12394;&#12522;&#12473;&#12488;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;</p>
      <pre class="programlisting">


Renderer renderer = Renderer.create(<span class="hl-string">"div#test"</span>, list, <span class="hl-keyword">new</span> ParallelDataConvertor&lt;String, String&gt;() {
                <em><span class="hl-annotation" style="color: gray">@Override</span></em>
                <span class="hl-keyword">public</span> String convert(String obj) {
                    <span class="hl-keyword">try</span> {
                        Thread.sleep(<span class="hl-number">1000</span>);
                    } <span class="hl-keyword">catch</span> (InterruptedException e) {
                        <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> RuntimeException(e);
                    }
                    <span class="hl-keyword">return</span> obj + <span class="hl-string">"-sleep"</span>;
                }
            });




      </pre> 
      
    </li></ul></div> 


  <p>Asta4D&#12398;&#23558;&#26469;&#12398;&#26041;&#21521;&#24615;&#12399;&#12289;&#12501;&#12523;&#12473;&#12479;&#12483;&#12463;&#12398;Web &#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12391;&#12377;&#12364;&#12289;&#21021;&#26399;&#12398;&#27573;&#38542;&#12391;&#12399;Spring MVC&#12392;&#32080;&#21512;&#12375;&#12390;&#21033;&#29992;&#12377;&#12427;&#26041;&#37341;&#12434;&#12392;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
  &#38283;&#30330;&#12434;&#34892;&#12358;&#38555;&#12289;Asta4D&#12391;&#12399;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12394;&#12356;&#27231;&#33021;&#12364;&#12354;&#12428;&#12400;&#12289;Spring MVC&#12395;&#20219;&#12379;&#12390;&#23455;&#35013;&#12377;&#12427;&#26041;&#37341;&#12391;&#12377;&#12290;</p>

  <p>&#29694;&#22312;&#12289;Asta4D&#12399;&#19977;&#12388;&#12398;&#37096;&#20998;&#12395;&#20998;&#12369;&#12390;&#23455;&#35013;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
    
   
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Asta4D Core: &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12456;&#12531;&#12472;&#12531;</p></li><li class="listitem"><p>Asta4D Web: View First&#12398;&#20181;&#32068;&#12415;</p></li><li class="listitem"><p>Asta4D Spring: Spring MVC&#12392;&#12398;&#36899;&#25658;&#21205;&#20316;</p></li></ul></div>


  <p>&#12414;&#12378;&#12289;&#20840;&#20307;&#27083;&#36896;&#22259;&#12434;&#21442;&#32771;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&#31777;&#21336;&#12394;&#35500;&#26126;&#12399;&#27083;&#36896;&#22259;&#12395;&#35352;&#36617;&#12375;&#12390;&#12356;&#12427;&#12383;&#12417;&#12289;&#12371;&#12371;&#12391;&#12399;&#12356;&#12367;&#12388;&#12363;&#12398;&#37096;&#20998;&#12398;&#12415;&#12395;&#36861;&#21152;&#35500;&#26126;&#12434;&#12375;&#12414;&#12377;&#12290;</p>

  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>URL Mapping Rule Extractor: &#20170;&#22238;&#12289;&#35299;&#26512;&#25991;&#27861;&#12399;Spring3&#12398;@RequestMapping&#12523;&#12540;&#12523;&#12434;&#27969;&#29992;&#12375;&#12289;Ant&#12398;&#12497;&#12473;&#23459;&#35328;&#25991;&#27861;&#12434;&#21033;&#29992;&#12375;&#12414;&#12377;&#12290;</p></li><li class="listitem">
        <p>Request Handler: &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12395;&#31227;&#12377;&#21069;&#12395;&#12289;&#30011;&#38754;&#34920;&#31034;&#12395;&#38306;&#20418;&#12398;&#12394;&#12356;&#26356;&#26032;&#20966;&#29702;&#12394;&#12393;&#12399;&#12371;&#12385;&#12425;&#12395;&#23550;&#24540;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
        <p>&#8251;&#21103;&#20316;&#29992;&#12392;&#12356;&#12358;&#35251;&#28857;&#12363;&#12425;&#35211;&#12427;&#12392;&#12289;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#34920;&#31034;&#12399;&#21103;&#20316;&#29992;&#12364;&#12394;&#12367;&#12289;DB&#26356;&#26032;&#12539;&#12525;&#12464;&#12452;&#12531;&#20966;&#29702;&#12394;&#12393;&#12399;&#21103;&#20316;&#29992;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;&#12381;&#12375;&#12390;&#12289;
        &#21103;&#20316;&#29992;&#12398;&#12354;&#12427;&#20966;&#29702;&#12399;Request Handler&#12391;&#23550;&#24540;&#12377;&#12427;&#12392;&#12356;&#12358;&#32771;&#12360;&#26041;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290;</p>
    </li><li class="listitem">
        <p>Renderer:&#29983;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12398;&#20869;&#23481;&#12395;&#23550;&#12375;&#12390;&#12393;&#12398;&#37096;&#20998;&#12399;&#12393;&#12398;&#12424;&#12358;&#12395;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12377;&#12427;&#12363;&#12392;&#12356;&#12358;&#12371;&#12392;&#12434;Snippet Method
        &#12391;&#23450;&#32681;&#12377;&#12427;&#12463;&#12521;&#12473;&#12391;&#12377;&#12290;CSS Selector&#12391;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#23550;&#35937;&#12434;&#23459;&#35328;&#12375;&#12390;&#12363;&#12425;&#21205;&#20316;&#12434;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;Renderer&#12391;&#35373;&#23450;&#12391;&#12365;&#12427;&#21205;&#20316;&#12399;&#12486;&#12461;&#12473;&#12488;&#35373;&#23450;&#12289;
        &#23646;&#24615;&#35373;&#23450;&#12289;css class&#36861;&#21152;&#12289;css class&#21066;&#38500;&#12289;DOM Node&#21066;&#38500;&#12289;DOM Node&#26360;&#12365;&#25563;&#12360;&#12394;&#12393;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;&#12522;&#12473;&#12488;&#12505;&#12540;&#12473;&#12391;&#12398;&#21205;&#20316;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;
        &#65288;&#35443;&#12375;&#12367;&#12399;&#24460;&#36848;&#12375;&#12414;&#12377;&#65289;</p>
    </li></ul></div>  
  






  
</div>
      

    </div>
  </div>
  
  <div class="part"><div class="titlepage"><div><div><h1 class="title"><a name="asta4d-functionality"></a>Part&nbsp;II.&nbsp;Asta4D&#12398;&#27231;&#33021;</h1></div></div></div>
    

    <div class="partintro"><div></div>
      <p>&#12371;&#12428;&#12363;&#12425;&#12289;&#27231;&#33021;&#12434;&#35500;&#26126;&#12375;&#12414;&#12377;&#12290;&#26368;&#20302;&#38480;&#23455;&#35013;&#12364;&#24517;&#35201;&#12394;&#31623;&#25152;&#12399; GenericController&#12539;Template&#12539;Snippet&#12398;&#19977;&#12388;&#12398;&#12415;&#12391;&#12377;&#12290;</p>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="controller"></a>2.&nbsp;GenericController</h2></div></div></div>
  

  <p>URL &#12392;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12392;&#12398;&#32016;&#20184;&#12369;&#12420;&#12289;Request Handler&#12398;&#35373;&#23450;&#12394;&#12393;&#12434;&#34892;&#12356;&#12414;&#12377;&#12290;&#25277;&#35937;&#12463;&#12521;&#12473;GenericControllerBase
  &#12434;&#32153;&#25215;&#12375;&#12289;&#25277;&#35937;&#12513;&#12477;&#12483;&#12489;initUrlMappingRules()&#12434;&#23455;&#35013;&#12375;&#12414;&#12377;&#12290;</p>
  <p>&#12414;&#12378;&#12289;URL&#12392;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#20808;&#12398;&#12510;&#12483;&#12481;&#12531;&#12464;&#38306;&#20418;&#12434;&#25351;&#23450;&#12391;&#12365;&#12414;&#12377;&#12290;URL&#12398;&#12497;&#12540;&#12473;&#12395;&#12399; Spring &#12398; AntPathMatcher &#12434;&#21033;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
  &#35443;&#32048;&#12394;&#35352;&#27861;&#12399;<a class="ulink" href="http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/util/AntPathMatcher.html" target="_top">Spring API</a>&#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
  </p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> GenericControllerSample <span class="hl-keyword">extends</span> GenericControllerBase {

    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">protected</span> <span class="hl-keyword">void</span> initUrlMappingRules(UrlMappingRuleHelper rules) {
        rules.add(<span class="hl-string">"/search/company"</span>, <span class="hl-string">"/index_search.html"</span>); <span class="hl-comment">// (1)</span>
        rules.add(<span class="hl-string">"/search/q/{query}"</span>, <span class="hl-string">"/search/result_company.html"</span>);<span class="hl-comment">// (2)</span>
        rules.add(<span class="hl-string">"/search/q/**/{query}"</span>, <span class="hl-string">"/search.html"</span>)
             .var(<span class="hl-string">"ex"</span>, <span class="hl-string">"query"</span>)
             .method(POST)
             .priority(-<span class="hl-number">100</span>); <span class="hl-comment">// (3)</span>
        &#8230;
    }
}



  </pre>

  
  <p>(1)	&#12300;/index&#12301;&#12408;&#12398;&#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12392;&#12375;&#12390; index.html &#12434;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;Method&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#22580;&#21512;&#12289;
  &#12487;&#12501;&#12457;&#12523;&#12488;&#12513;&#12477;&#12483;&#12489;&#12392;&#12375;&#12390;GET&#12364;&#35373;&#23450;&#12373;&#12428;&#12414;&#12377;&#12290;UrlMappingRuleHelper# setDefaultMethod() &#12391;&#12487;&#12501;&#12457;&#12523;&#12488;&#12513;&#12477;&#12483;&#12489;&#12434;&#22793;&#26356;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

  <p>(2)	&#12300;/search/q/{&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;}&#12301;&#12408;&#12398;&#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12392;&#12375;&#12390; search.html &#12434;&#20351;&#29992;&#12375;&#12289;URL&#12395;&#21547;&#12414;&#12428;&#12427;{&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;}
  &#12434;&#22793;&#25968;&#12300;query&#12301;&#12395;&#26684;&#32013;&#12377;&#12427;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#26684;&#32013;&#12375;&#12383;&#22793;&#25968;&#12399;&#12289;Snippet &#12391;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
  
  <p>(3)	&#12300;/search/q/{&#20219;&#24847;&#12398;&#12497;&#12473;}/{&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;}&#12301;&#12408;&#12398;&#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12392;&#12375;&#12390; search.html &#12434;&#20351;&#29992;&#12375;&#12289;URL&#12395;&#21547;&#12414;&#12428;&#12427;{&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;}
  &#12434;&#22793;&#25968;&#12300;query&#12301;&#12395;&#26684;&#32013;&#12377;&#12427;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;var() &#12391;&#36861;&#21152;&#22793;&#25968;&#12398;&#23459;&#35328;&#12289;method() &#12391;POST&#12398;&#25351;&#23450;&#12289;priority()
  &#12391;&#12371;&#12398;&#12523;&#12540;&#12523;&#12398;&#20778;&#20808;&#24230;&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  
  <p>RequestHanlder&#12395;&#12388;&#12356;&#12390;&#65306;</p>
  
  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> GenericControllerSample <span class="hl-keyword">extends</span> GenericControllerBase {

    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">protected</span> <span class="hl-keyword">void</span> initUrlMappingRules(UrlMappingRuleHelper rules) {
        rules.add(POST, <span class="hl-string">"/profile/complete"</span>, ProfileSendHandler.<span class="hl-keyword">class</span>); <span class="hl-comment">// (4)</span>
        rules.add(GET, <span class="hl-string">"/login"</span>, <span class="hl-string">"/login.html"</span>, LoginHandler.<span class="hl-keyword">class</span>); <span class="hl-comment">// (5)   </span>
        rules.add(<span class="hl-string">"/login/xx"</span>, 
                  ProfileSendHandler.<span class="hl-keyword">class</span>, LoginHandler.<span class="hl-keyword">class</span>); <span class="hl-comment">// (6)</span>
        &#8230;
    }
}


  </pre>

  
  <p>(4)	&#12300;/profile/complete&#12301;&#12408;&#12398; POST &#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#12289;ProfileSendHandler&#12391;&#20966;&#29702;&#12434;&#34892;&#12358;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
  &#36983;&#31227;&#20808;&#12399;ProfileSendHandler&#12398;&#25147;&#12426;&#20516;&#12391;&#27770;&#23450;&#12375;&#12414;&#12377;&#12290;</p>
  
  <p>(5)	&#12300;/login&#12301;&#12408;&#12398; GET &#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#12289;LoginHandler &#12391;&#20966;&#29702;&#12434;&#34892;&#12358;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;LoginHandler&#12398;&#25147;&#12426;&#20516;&#12364;&#12394;&#12356;&#22580;&#21512;&#12289;
  &#25351;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#12300;/login.html&#12301;&#12434;&#12487;&#12501;&#12457;&#12523;&#12488;&#36983;&#31227;&#20808;&#12392;&#12375;&#12390;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12375;&#12414;&#12377;&#12290;&#65288;RequestHandler&#12398;&#25147;&#12426;&#20516;&#12364;&#12394;&#12356;&#22580;&#21512;&#12395;&#38480;&#12426;&#12289;&#12523;&#12540;&#12523;&#12391;&#25351;&#23450;&#12375;&#12390;&#12356;&#12427;
  &#36983;&#31227;&#20808;&#12434;&#21442;&#29031;&#12375;&#12414;&#12377;&#65289;</p>
  
  <p>(6)	RequestHandler&#12434;&#35079;&#25968;&#25351;&#23450;&#12375;&#12289;&#12481;&#12455;&#12540;&#12531;&#12392;&#12375;&#12390;&#38918;&#27425;&#20966;&#29702;&#12434;&#34892;&#12358;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12481;&#12455;&#12540;&#12531;&#20869;&#12398;&#36884;&#20013;&#12395;&#12354;&#12427;RequestHandler
  &#12364;&#36983;&#31227;&#20808;&#12434;&#36820;&#12377;&#12392;&#12289;&#24460;&#32154;&#12398;&#20966;&#29702;&#12434;&#32154;&#12369;&#12378;&#36820;&#12373;&#12428;&#12383;&#36983;&#31227;&#20808;&#12395;&#36983;&#31227;&#12375;&#12414;&#12377;&#12290;</p>
  
  <p>&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;&#12395;&#12388;&#12356;&#12390;&#65306;</p>
  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> GenericControllerSample <span class="hl-keyword">extends</span> GenericControllerBase {
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">protected</span> <span class="hl-keyword">void</span> initUrlMappingRules(UrlMappingRuleHelper rules) {
        rules.add(
                <span class="hl-string">"/redirect"</span>,
                <span class="hl-string">"http://astamuse.com/"</span>,
                RedirectHandler.<span class="hl-keyword">class</span>); <span class="hl-comment">// (7)</span>
        rules.add(<span class="hl-string">"/redirect"</span>, <span class="hl-string">"http://astamuse.com/"</span>).redirect(); <span class="hl-comment">// (8)</span>
    }
}


  </pre>  
  
  <p>(7)	&#12499;&#12523;&#12488;&#12452;&#12531;&#12398;RedirectHandler&#12434;&#20351;&#29992;&#12375;&#12390;&#12289;&#36983;&#31227;&#20808;&#12395;&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;&#12377;&#12427;(HTTP 302&#12434;&#25147;&#12377;)&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  <p>(8)	&#21516;&#27096;&#12398;&#20966;&#29702;&#12434;redirect()&#12513;&#12477;&#12483;&#12489;&#12434;&#20351;&#29992;&#12375;&#12390;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  
  <p>handler()&#12513;&#12477;&#12483;&#12489;&#12395;&#12388;&#12356;&#12390;&#65306;</p>
  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> GenericControllerSample <span class="hl-keyword">extends</span> GenericControllerBase {
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">protected</span> <span class="hl-keyword">void</span> initUrlMappingRules(UrlMappingRuleHelper rules) {
        rules.add(<span class="hl-string">"/example/patentlist/xxx/fff"</span>, 
            <span class="hl-string">"/patentlist.html"</span>,
            LoginHandler.<span class="hl-keyword">class</span>, ProfileSendHandler.<span class="hl-keyword">class</span>).handler(
              <span class="hl-keyword">new</span> Object() {
                        <em><span class="hl-annotation" style="color: gray">@RequestHandler</span></em>
                        <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> go() {
                           <span class="hl-comment">// do nothing</span>
                        }
              })
            .handler(LoginHandler.<span class="hl-keyword">class</span>)
            .handler(ProfileSendHandler.<span class="hl-keyword">class</span>);<span class="hl-comment">// (9)&#8230;</span>
    }
}



  </pre>
  <p>(9)	handler()&#12513;&#12477;&#12483;&#12489;&#12391;RequestHandler&#12434;&#36861;&#21152;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#21487;&#33021;&#12391;&#12377;&#12290;</p>
  
 
</div>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="template"></a>3.&nbsp;Template</h2></div></div></div>
  

  <p>&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;snippet&#12463;&#12521;&#12473;&#12398;&#23459;&#35328;&#65306;</p>
  <p>View &#23652;&#12398;&#38745;&#30340;&#12467;&#12531;&#12486;&#12531;&#12484;&#12392;&#12394;&#12427; HTML &#12501;&#12449;&#12452;&#12523;&#12391;&#12377;&#12290;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12399;&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12399;Web&#12450;&#12503;&#12522;&#12398;Document Root
  &#20197;&#19979;&#12395;&#37197;&#32622;&#12375;&#12414;&#12377;&#12364;&#12289;/WEB-INF&#19979;&#12395;&#25351;&#23450;&#12375;&#12383;&#12356;&#22580;&#21512;&#12395;&#12399; TemplateResolver#searchPath() &#12434;&#25351;&#23450;&#12391;&#12365;&#12414;&#12377;&#12290;
  &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12391;&#12399;&#12289;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#38555;&#12395;&#21628;&#12403;&#20986;&#12373;&#12428;&#12427; Snippet &#12463;&#12521;&#12473;&#12434;HTML&#12479;&#12464;&#20869;&#12395;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


&lt;html&gt;
  &lt;head&gt;&lt;title&gt;template sample&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;!-- (<span class="hl-number">1</span>) --&gt;
    &lt;div afd:render=<span class="hl-string">"SampleSnippet"</span>&gt;
      &lt;span&gt;dummy text&lt;/span&gt;
    &lt;/div&gt;
    &lt;!-- (<span class="hl-number">2</span>) --&gt;
    &lt;div afd:render=<span class="hl-string">"SampleSnippet:execute"</span>&gt;
      &lt;span id=<span class="hl-string">"sample"</span> value=<span class="hl-string">"1"</span>&gt;dummy text&lt;/span&gt;
      &lt;span id=<span class="hl-string">"sample_nosymbol"</span> <span class="hl-keyword">class</span>=<span class="hl-string">"text name"</span>&gt;text&lt;/span&gt;
      &lt;span id=<span class="hl-string">"sample_plus"</span> <span class="hl-keyword">class</span>=<span class="hl-string">"text name"</span>&gt;text&lt;/span&gt;
      &lt;span id=<span class="hl-string">"sample_minus"</span> <span class="hl-keyword">class</span>=<span class="hl-string">"text name"</span>&gt;text&lt;/span&gt;
      &lt;div id=<span class="hl-string">"dynamic_snippet"</span>&gt;&lt;/div&gt;
      &lt;div id=<span class="hl-string">"dynamic_embed"</span>&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- (<span class="hl-number">3</span>) --&gt;
    &lt;afd:snippet render=<span class="hl-string">"SampleSnippet:embedTag"</span> value=<span class="hl-string">"sampleValue"</span>&gt;
      &lt;span&gt;dummy text&lt;/span&gt;
    &lt;/afd:snippet&gt;
  &lt;/body&gt;
&lt;/html&gt;


  </pre>

  
  <p>(1)	&#20219;&#24847;&#12398;&#12479;&#12464;&#12398;&#12300;afd:render&#12301;&#23646;&#24615;&#12395;&#12289;SampleSnippet&#12463;&#12521;&#12473;&#12434;Snippet&#12392;&#12375;&#12390;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12513;&#12477;&#12483;&#12489;&#21517;&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#22580;&#21512;&#12289;
  render()&#12513;&#12477;&#12483;&#12489;&#12364;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;(&#12463;&#12521;&#12473;&#21517;&#12399;&#23436;&#20840;&#20462;&#39166;&#21517;&#12391;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;Configuration#setSnippetResolver()&#12391;&#12487;&#12501;&#12457;&#12523;&#12488;&#12497;&#12483;&#12465;&#12540;&#12472;
  &#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12391;&#12289;&#12497;&#12483;&#12465;&#12540;&#12472;&#21517;&#12434;&#30465;&#30053;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;Spring MVC&#12392;&#12398;&#36899;&#25658;&#21205;&#20316;&#12434;&#12377;&#12427;&#38555;&#12289;Spring Bean Container&#12391;&#31649;&#29702;&#12375;&#12390;&#12356;&#12427;Bean ID &#12434;&#25351;&#23450;&#12375;&#12414;&#12377;&#12290;)</p>

  <p>(2)	(2)	&#20219;&#24847;&#12398;&#12479;&#12464;&#12398;&#12300;afd:render&#12301;&#23646;&#24615;&#12395;&#12289;SampleSnippet&#12463;&#12521;&#12473;&#12398;execute()&#12513;&#12477;&#12483;&#12489;&#12434;Snippet&#12392;&#12375;&#12390;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
  &#12414;&#12383;&#12289;&#23376;&#35201;&#32032;&#12398;span&#12479;&#12464;&#12398;&#23646;&#24615;&#21517;&#12420;&#23646;&#24615;&#20516;&#12399;execute&#12513;&#12477;&#12483;&#12489;&#20869;&#12391;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#23550;&#29031;&#12398;&#25351;&#23450;&#12395;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
  
  <p>(3)	afd:snippet&#12479;&#12464;&#12398;render&#23646;&#24615;&#12395;&#12289;SampleSnippet&#12463;&#12521;&#12473;&#12398;embedTag()&#12513;&#12477;&#12483;&#12489;&#12434;Snippet&#12392;&#12375;&#12390;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;
  value&#23646;&#24615;&#12399;embedTag()&#12513;&#12477;&#12483;&#12489;&#12398;&#24341;&#25968;&#12392;&#12375;&#12390;&#21442;&#29031;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
  
  <p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12399;&#21029;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12434;&#32153;&#25215;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#12354;&#12427;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#32153;&#25215;&#12375;&#12383;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12391;&#12399;&#12289;&#35242;&#12392;&#12394;&#12427;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12398;&#20219;&#24847;&#12398;&#35201;&#32032;&#12395;&#36861;&#21152;&#12539;&#25407;&#20837;&#12539;&#19978;&#26360;&#12365;&#12434;
  &#34892;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#35201;&#32032;&#12398;&#36861;&#21152;&#12362;&#12424;&#12403;&#25407;&#20837;&#12399;&#12289;&#20027;&#12395;HTML&#12504;&#12483;&#12480;&#24773;&#22577;&#12434;&#12510;&#12540;&#12472;&#12377;&#12427;&#30446;&#30340;&#12391;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12434;&#24819;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  
  <p>parent.html</p>
  
  <pre class="programlisting">


&lt;html&gt;
  &lt;head&gt;
    &lt;afd:block id=<span class="hl-string">"block1"</span>&gt;
      &lt;link href=<span class="hl-string">"parent1.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
    &lt;/afd:block&gt;
    &lt;afd:block id=<span class="hl-string">"block2"</span>&gt;
      &lt;link href=<span class="hl-string">"parent2.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
    &lt;/afd:block&gt;
  &lt;title&gt;extension sample&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;afd:block id=<span class="hl-string">"content"</span>&gt;content&lt;/afd:block&gt;
  &lt;/body&gt;
&lt;/html&gt;



  </pre>

  <p>child.html</p>
  
  <pre class="programlisting">


&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;!-- (<span class="hl-number">1</span>) --&gt;
&lt;afd:extension parent=<span class="hl-string">"parent.html"</span>&gt;
  &lt;!-- (<span class="hl-number">2</span>) --&gt;
  &lt;afd:block append=<span class="hl-string">"block1"</span>&gt;
    &lt;link href=<span class="hl-string">"child1.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
  &lt;/afd:block&gt;
  &lt;!-- (<span class="hl-number">3</span>) --&gt;
  &lt;afd:block insert=<span class="hl-string">"block2"</span>&gt;
    &lt;link href=<span class="hl-string">"child2.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
  &lt;/afd:block&gt;
  &lt;!-- (<span class="hl-number">4</span>) --&gt;
  &lt;afd:block override=<span class="hl-string">"content "</span>&gt;
    &lt;div&gt;hello&lt;/div&gt;
    &lt;!-- (<span class="hl-number">5</span>) --&gt;
    &lt;afd:embed target=<span class="hl-string">"/templates/embed.html"</span> &gt;&lt;/afd:embed&gt;
  &lt;/afd:block&gt;
&lt;/afd:extension&gt;
&lt;/body&gt;&lt;/html&gt;



  </pre>
  
  <p>embed.html</p>
  
  <pre class="programlisting">


&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
  &lt;!-- (<span class="hl-number">6</span>) --&gt;
  &lt;afd:block append=<span class="hl-string">"block1"</span>&gt;
    &lt;link href=<span class="hl-string">"embed.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
  &lt;/afd:block&gt;
  &lt;div&gt;good embed&lt;/div&gt;
&lt;/body&gt;&lt;/html&gt;




  </pre> 
  
  <p>(1)	&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12300;parent.html&#12301;&#12434;&#32153;&#25215;&#12377;&#12427;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;(&#23376;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12395;&#23550;&#12375;&#12390;&#12289;&#12300;afd:extension&#12301;
  &#23459;&#35328;&#20197;&#22806;&#12398;&#12418;&#12398;&#12364;&#28961;&#35222;&#12373;&#12428;&#12390;&#12356;&#12427;&#12398;&#12391;&#12289;editor&#21521;&#12369;&#12398;head&#24773;&#22577;&#12394;&#12393;&#12434;&#33258;&#30001;&#12395;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;)</p>
  
  <p>(2)	&#32153;&#25215;&#20803;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12398;block1&#23646;&#24615;&#12398;&#23376;&#35201;&#32032;&#12398;&#24460;&#12395;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;
  &#12300;&lt;link href="parent1.css" ... /&gt;&lt;link href="child1.css" ... /&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  
  <p>(3)	&#32153;&#25215;&#20803;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12398;block2&#23646;&#24615;&#12398;&#23376;&#35201;&#32032;&#12398;&#21069;&#12395;&#25407;&#20837;&#12377;&#12427;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;
  &#12300;&lt;link href="child2.css" ... /&gt;&lt;link href="parent2.css" ... /&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

  <p>(4)	&#32153;&#25215;&#20803;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12398;content&#23646;&#24615;&#12398;&#23376;&#35201;&#32032;&#12434;&#19978;&#26360;&#12365;&#12377;&#12427;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;&#12300;&lt;div&gt;hello&lt;/div&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  
  <p>(5)	&#21029;&#12398;HTML&#12501;&#12449;&#12452;&#12523;&#12434;&#22475;&#12417;&#36796;&#12416;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12300;/templates/embed.html&#12301;&#12398;&#20869;&#23481;&#12364;&#22475;&#12417;&#36796;&#12414;&#12428;&#12390;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  
  <p>(6)	embed&#12501;&#12449;&#12452;&#12523;&#12391;&#12418;&#12289;body&#12398;&#37096;&#20998;&#20197;&#22806;&#12399;&#28961;&#35222;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12398;&#12391;&#12289;&#12456;&#12487;&#12451;&#12479;&#21521;&#12369;&#12398;&#12398;&#12504;&#12483;&#12480;&#12394;&#12393;&#12399;&#33258;&#30001;&#12395;&#35373;&#23450;&#12391;&#12365;&#12427;&#12290;&#19988;&#12388;&#12289;block&#23459;&#35328;&#12364;&#12354;&#12428;&#12400;&#12289;
  &#32153;&#25215;&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12289;&#24341;&#29992;&#20803;&#12398;&#12501;&#12449;&#12452;&#12523;&#12395;&#23550;&#35937;block&#12434;&#25506;&#12375;&#12390;&#12289;&#36861;&#21152;&#12418;&#12375;&#12367;&#12399;&#19978;&#26360;&#12365;&#12434;&#12375;&#12414;&#12377;&#12290;</p>
  
  <p>&#19978;&#35352;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#32080;&#26524;&#12399;&#19979;&#35352;&#12398;&#12424;&#12358;&#12395;&#12394;&#12387;&#12390;&#12356;&#12427;&#65306;</p>
  <pre class="programlisting">


&lt;html&gt;
  &lt;head&gt;
      &lt;!&#8212;block1 --&gt;
      &lt;link href=<span class="hl-string">"parent1.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
&lt;link href=<span class="hl-string">"child1.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
&lt;link href=<span class="hl-string">"embed.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
     &lt;!&#8212;block2 --&gt;
      &lt;link href=<span class="hl-string">"child2.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
      &lt;link href=<span class="hl-string">"parent2.css"</span> rel=<span class="hl-string">"stylesheet"</span> type=<span class="hl-string">"text/css"</span> /&gt;
  &lt;title&gt;extension sample&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!&#8212;content --&gt;
    &lt;div&gt;hello&lt;/div&gt;
    &lt;!&#8212;embed --&gt;
    &lt;div&gt;good embed&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;

}


  </pre>  
  
  <p>afd:clear&#12391;&#12510;&#12540;&#12463;&#12375;&#12390;&#12356;&#12427;&#20869;&#23481;&#12399;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12377;&#12427;&#38555;&#21066;&#38500;&#12373;&#12428;&#12414;&#12377;&#12398;&#12391;&#12289;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12395;&#35079;&#25968;&#34892;&#12398;&#12487;&#12540;&#12479;&#12398;&#34920;&#29694;&#12434;&#34920;&#12375;&#12383;&#12356;&#22580;&#21512;&#12289;
  &#38283;&#30330;&#20596;&#12399;&#20313;&#35336;&#12394;&#34892;&#12395;&#12300;afd:clear&#12301;&#12434;&#20837;&#12428;&#12427;&#12398;&#12391;&#12289;&#36969;&#24403;&#12395;&#35079;&#25968;&#34892;&#12398;HTML&#12434;&#26360;&#12356;&#12390;&#12418;&#27083;&#12356;&#12414;&#12379;&#12435;&#12290;</p>
  
  <pre class="programlisting">


&lt;ul&gt;
&lt;li <span class="hl-keyword">class</span>=<span class="hl-string">"first"</span>&gt; row <span class="hl-number">1</span>
&lt;li <span class="hl-keyword">class</span>=<span class="hl-string">"even"</span>  afd:clear&gt; row <span class="hl-number">2</span>
&lt;li <span class="hl-keyword">class</span>=<span class="hl-string">" odd"</span> afd:clear &gt; row <span class="hl-number">3</span>
&lt;/ul&gt;



  </pre>
  
  <p>HTML5&#12395;&#12388;&#12356;&#12390;&#65306;</p>
  
  <p>&#20351;&#29992;&#12375;&#12390;&#12356;&#12427;HTML&#35299;&#26512;&#12521;&#12452;&#12502;&#12521;&#12522;jsoup&#12399;WHATWG&#12398;HTML5&#12434;&#28310;&#25312;&#12375;&#12390;&#12356;&#12427;&#12290;&#35373;&#35336;&#12398;&#30446;&#30340;&#12399;&#26368;&#22823;&#38480;&#12398;&#20114;&#25563;&#24615;&#12434;&#25345;&#12388;&#12371;&#12392;&#12394;&#12398;&#12391;&#12289;
  &#19981;&#27491;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12364;&#12354;&#12387;&#12390;&#12418;&#12289;&#12456;&#12521;&#12540;&#12395;&#12394;&#12425;&#12378;&#12395;&#33258;&#21205;&#30340;&#12395;&#35036;&#23436;&#12375;&#12390;&#20462;&#27491;&#12377;&#12427;&#20181;&#27096;&#12395;&#12394;&#12387;&#12390;&#12356;&#12427;&#12290;&#32080;&#26524;&#12392;&#12375;&#12390;&#12289;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12395;&#12418;&#12375;&#12511;&#12473;&#12394;&#12393;&#12398;&#21407;&#22240;&#12391;
  &#19981;&#27491;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12364;&#12354;&#12387;&#12390;&#12418;&#12289;jsoup&#12364;&#12456;&#12521;&#12540;&#12395;&#12394;&#12425;&#12378;&#12395;&#27491;&#24120;&#12395;&#35299;&#26512;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12394;&#12387;&#12390;&#12362;&#12426;&#12289;&#33258;&#21205;&#20462;&#27491;&#12398;&#32080;&#26524;&#12399;&#20104;&#24819;&#36890;&#12426;&#12391;&#12354;&#12428;&#12400;&#12289;&#30011;&#38754;&#12364;&#27491;&#12375;&#12367;&#34920;&#31034;&#12375;&#12414;&#12377;&#12364;&#12289;
  &#20104;&#24819;&#36890;&#12426;&#12391;&#12399;&#12394;&#12356;&#22580;&#21512;&#12289;&#30011;&#38754;&#12364;&#12362;&#12363;&#12375;&#12367;&#12394;&#12427;&#12371;&#12392;&#12391;&#12377;&#12290;</p>
  
  <p>&#29305;&#12395;&#27671;&#12434;&#20184;&#12369;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12398;&#12399;&#12289;HTML5&#12398;&#22522;&#28310;&#12392;&#12375;&#12390;&#12289;&#12475;&#12523;&#12501;&#12463;&#12525;&#12540;&#12474;&#12398;&#12479;&#12464;&#12364;&#12452;&#12522;&#12540;&#12460;&#12523;&#12394;&#12398;&#12391;&#12289;&#12475;&#12523;&#12501;&#12463;&#12525;&#12540;&#12474;&#12398;&#12479;&#12464;&#12434;&#12420;&#12417;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>

  <p>Snippet&#21628;&#12403;&#20986;&#12375;&#23459;&#35328;&#12289;&#21029;&#12501;&#12449;&#12452;&#12523;&#22475;&#12417;&#36796;&#12415;&#23459;&#35328;&#12399;&#12493;&#12473;&#12488;&#12373;&#12379;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#12493;&#12473;&#12488;&#12375;&#12383;Snippet&#21628;&#12403;&#20986;&#12375;&#12399;&#12289;&#22806;&#20596;&#12398;&#12479;&#12464;&#12395;&#23459;&#35328;&#12375;&#12383;&#12418;&#12398;&#12363;&#12425;&#38918;&#30058;&#12395;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

    <pre class="programlisting">


&lt;html&gt;
  &lt;head&gt;&lt;title&gt;nest sample&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;afd:snippet render=<span class="hl-string">"SampleNestSnippet:outer"</span>&gt;
      &lt;p id=<span class="hl-string">"outer"</span>&gt;&lt;/p&gt;
        &lt;afd:snippet render=<span class="hl-string">"SampleNestSnippet:inner"</span>&gt;
          &lt;p id=<span class="hl-string">"inner"</span>&gt;&lt;/p&gt;
        &lt;/afd:snippet&gt;
      &lt;afd:embed target=<span class="hl-string">"/templates/nested_embed.html"</span> /&gt;
    &lt;/afd:snippet&gt;
  &lt;/body&gt;
&lt;/html&gt;



  </pre>
  
  <pre class="programlisting">


&lt;div id=<span class="hl-string">"nested1"</span>&gt;&lt;/div&gt;
&lt;div id=<span class="hl-string">"nested2"</span> afd:render=<span class="hl-string">"SampleNestSnippet:nestedEmbed"</span>&gt;&lt;/div&gt;



  </pre>  
  <p>&#12371;&#12398;&#22580;&#21512;&#12289;outer -&gt; nestedEmbed -&gt; inner&#12398;&#38918;&#12395;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12364;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;&#22806;&#20596;&#12398;Snippet&#12391;&#35373;&#23450;&#12375;&#12383;&#23646;&#24615;&#20516;&#12434;&#20869;&#20596;&#12398;Snippet&#12391;
  &#24341;&#25968;&#12392;&#12375;&#12390;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;(&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12398;HTML&#12479;&#12464;&#23646;&#24615;&#20516;&#12434;Snippet&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12398;&#24341;&#25968;&#12392;&#12375;&#12390;&#25201;&#12358;&#26041;&#27861;&#12399;3. Snippet &#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;)</p>
  
 
</div>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="snippet"></a>4.&nbsp;Snippet</h2></div></div></div>
  

  <p>View&#23652;&#12398;&#21205;&#30340;&#20986;&#21147;&#37096;&#20998;&#12391;&#12377;&#12290;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12395;&#23450;&#32681;&#12373;&#12428;&#12383;&#12513;&#12477;&#12483;&#12489;&#12364;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;Renderer&#12434;&#36820;&#12377;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12434;&#23450;&#32681;&#12375;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> SampleSnippet {
  <span class="hl-keyword">public</span> Renderer render() { <span class="hl-comment">// (1)</span>
    Element element = ElementUtil.parseAsSingle(<span class="hl-string">"&lt;div&gt;replaced element&lt;/div&gt;"</span>);
    <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">"*"</span>, element);
  }

  <span class="hl-keyword">public</span> Renderer execute() { <span class="hl-comment">// (2)</span>
    Renderer renderer = Renderer.create(<span class="hl-string">"#sample"</span>, <span class="hl-string">"replaced text"</span>);
    renderer.add(<span class="hl-string">"#sample"</span>, <span class="hl-string">"value"</span>, <span class="hl-string">"2"</span>);
    renderer.add(<span class="hl-string">"#sample_nosymbol"</span>, <span class="hl-string">"class"</span>, <span class="hl-string">"label"</span>);
    renderer.add(<span class="hl-string">"#sample_plus"</span>, <span class="hl-string">"+class"</span>, <span class="hl-string">"label"</span>);
    renderer.add(<span class="hl-string">"#sample_minus"</span>, <span class="hl-string">"-class"</span>, <span class="hl-string">"text"</span>);
    Element subSnippet = <span class="hl-keyword">new</span> SnippetNode(<span class="hl-string">"DynamicSnippet:execute"</span>);
    renderer.add(<span class="hl-string">"#dynamic_snippet"</span>, <span class="hl-keyword">new</span> ChildReplacer(subSnippet));
    Element embed = <span class="hl-keyword">new</span> EmbedNode(<span class="hl-string">"/templates/dynamic_embed.html"</span>);
    renderer.add(<span class="hl-string">"#dynamic_embed"</span>, embed);
    <span class="hl-keyword">return</span> renderer;
  }

  <span class="hl-keyword">public</span> Renderer embedTag(String value) { <span class="hl-comment">// (3)</span>
    <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">"span"</span>, value);
  }
}



  </pre>

  
  <p>(1)	&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12398;&#20219;&#24847;&#12398;&#12479;&#12464;&#12418;&#12375;&#12367;&#12399;afd:snippet&#12479;&#12464;&#12398;render&#23646;&#24615;&#12391;&#12513;&#12477;&#12483;&#12489;&#21517;&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#22580;&#21512;&#12395;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

  <p>(2)	&#12300;&lt;&#12463;&#12521;&#12473;&#21517;&gt;:execute&#12301;&#12392;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#12395;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  
  <p>(3)	&#12300;&lt;&#12463;&#12521;&#12473;&#21517;&gt;:embedTag&#12301;&#12392;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#12395;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;render&#23646;&#24615;&#12434;&#23450;&#32681;&#12375;&#12383;&#12479;&#12464;&#12398;value&#23646;&#24615;&#12398;&#20516;&#12364;&#24341;&#25968;value
  &#12398;&#20516;&#12395;&#26684;&#32013;&#12373;&#12428;&#12414;&#12377;&#12290;(&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12398;&#12479;&#12464;&#23646;&#24615;&#21517;&#12392;&#19968;&#33268;&#12377;&#12427;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12398;&#24341;&#25968;&#12395;&#20516;&#12364;&#26684;&#32013;&#12373;&#12428;&#12414;&#12377;)</p>
  
</div>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="render"></a>5.&nbsp;Renderer</h2></div></div></div>
  

  <p>Snippet&#12391;&#25147;&#12426;&#20516;&#12392;&#12375;&#12390;&#36820;&#12373;&#12428;&#12427;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12487;&#12540;&#12479;&#12391;&#12377;&#12290;Render&#23646;&#24615;&#12434;&#23450;&#32681;&#12375;&#12383;&#12479;&#12464;&#12398;&#23376;&#35201;&#32032;&#12398;&#23436;&#20840;&#32622;&#25563;&#12539;CSS&#12475;&#12524;&#12463;&#12479;&#12391;&#12398;&#26465;&#20214;&#25351;&#23450;&#12395;&#12424;&#12427;&#37096;&#20998;&#32622;&#25563;&#12394;&#12393;&#12434;&#34892;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> SampleSnippet {
  <span class="hl-keyword">public</span> Renderer render() {
    Element element = ElementUtil.parseAsSingle(<span class="hl-string">"&lt;div&gt;replaced element&lt;/div&gt;"</span>);
    <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">"*"</span>, element); <span class="hl-comment">// (1)</span>
  }

  <span class="hl-keyword">public</span> Renderer execute() {
    Renderer renderer = Renderer.create(<span class="hl-string">"#sample"</span>, <span class="hl-string">"replaced text"</span>); <span class="hl-comment">// (2)</span>
    renderer.add(<span class="hl-string">"#sample"</span>, <span class="hl-string">"value"</span>, <span class="hl-string">"2"</span>); <span class="hl-comment">// (3)</span>
    renderer.add(<span class="hl-string">"#sample_nosymbol"</span>, <span class="hl-string">"class"</span>, <span class="hl-string">"label"</span>); <span class="hl-comment">// (4)</span>
    renderer.add(<span class="hl-string">"#sample_plus"</span>, <span class="hl-string">"+class"</span>, <span class="hl-string">"label"</span>); <span class="hl-comment">// (5)</span>
    renderer.add(<span class="hl-string">"#sample_minus"</span>, <span class="hl-string">"-class"</span>, <span class="hl-string">"text"</span>); <span class="hl-comment">// (6)</span>
    Element subSnippet = <span class="hl-keyword">new</span> SnippetNode(<span class="hl-string">"DynamicSnippet:execute"</span>);
    renderer.add(<span class="hl-string">"#dynamic_snippet"</span>, <span class="hl-keyword">new</span> ChildReplacer(subSnippet)); <span class="hl-comment">// (7)</span>
    Element embed = <span class="hl-keyword">new</span> EmbedNode(<span class="hl-string">"/templates/dynamic_embed.html"</span>);
    renderer.add(<span class="hl-string">"#dynamic_embed"</span>, embed); <span class="hl-comment">// (8)</span>
    <span class="hl-keyword">return</span> renderer;
  }

  <span class="hl-keyword">public</span> Renderer embedTag(String value) {
    <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">"span"</span>, value); <span class="hl-comment">// (9)</span>
  }
}



  </pre>

  <p>(1)	CSS&#12475;&#12524;&#12463;&#12479;&#12392;&#12375;&#12390;&#12300;*(&#20219;&#24847;&#12398;&#35201;&#32032;&#12392;&#19968;&#33268;)&#12301;&#12289;&#20986;&#21147;&#12377;&#12427;&#35201;&#32032;&#12392;&#12375;&#12390;&#25991;&#23383;&#21015;&#12363;&#12425;&#20316;&#25104;&#12375;&#12383;Element&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;render&#23646;&#24615;&#12434;&#25351;&#23450;&#12375;&#12383;&#12479;&#12464;&#12398;&#31278;&#39006;&#12395;&#38306;&#12431;&#12425;&#12378;&#12289;
  &#12300;&lt;div&gt;replaced element&lt;/div&gt;&#12301;&#12395;&#32622;&#25563;&#12375;&#12390;&#20986;&#21147;&#12375;&#12414;&#12377;&#12290;</p>
  <p>(2)	CSS&#12475;&#12524;&#12463;&#12479;&#12392;&#12375;&#12390;&#12300;#sample(id&#23646;&#24615;&#12398;&#20516;&#12364;sample)&#12301;&#12289;&#20986;&#21147;&#12377;&#12427;&#35201;&#32032;&#12392;&#12375;&#12390;&#25991;&#23383;&#21015;&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  <p>(3)	id&#23646;&#24615;&#12398;&#20516;&#12364;sample&#12391;&#12354;&#12427;&#12479;&#12464;&#12398;value&#23646;&#24615;&#12398;&#20516;&#12395;&#12300;2&#12301;&#12434;&#35373;&#23450;&#12375;&#12390;&#20986;&#21147;&#12377;&#12427;&#12424;&#12358;&#12395;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;(2)&#12392;(3)&#12398;&#25351;&#23450;&#12395;&#12424;&#12426;&#12289;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;
  &#12300;&lt;span id="sample" value="2"&gt;replaced text&lt;/span&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  <p>(4)	id&#23646;&#24615;&#12398;&#20516;&#12364;sample_nosymbol&#12391;&#12354;&#12427;&#12479;&#12464;&#12398;class&#23646;&#24615;&#12398;&#20516;&#12395;&#12300;label&#12301;&#12434;&#35373;&#23450;&#12375;&#12390;&#20986;&#21147;&#12377;&#12427;&#12424;&#12358;&#12395;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;&#12300;&lt;span id="sample_nosymbol" 
  class="label"&gt;text&lt;/span&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  <p>(5)	&#23646;&#24615;&#21517;&#12398;&#21069;&#12395;&#12300;+&#12301;&#12434;&#20184;&#19982;&#12377;&#12427;&#12371;&#12392;&#12395;&#12424;&#12426;&#12289;id&#23646;&#24615;&#12398;&#20516;&#12364;sample_plus&#12391;&#12354;&#12427;&#12479;&#12464;&#12398;class&#23646;&#24615;&#12398;&#20516;&#12395;&#12300;label&#12301;&#12434;&#36861;&#21152;&#12375;&#12390;&#20986;&#21147;&#12377;&#12427;&#12424;&#12358;&#12395;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;
  &#12300;&lt;span id="sample_plus" class="text name label"&gt;text&lt;/span&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;(&#23646;&#24615;&#20516;&#12398;&#36861;&#21152;&#12399;class&#23646;&#24615;&#12395;&#12398;&#12415;&#20316;&#29992;&#12375;&#12414;&#12377;&#12290;class&#23646;&#24615;&#20197;&#22806;&#12395;+&#35352;&#21495;&#12434;
  &#20184;&#19982;&#12375;&#12383;&#22580;&#21512;&#12289;&#35352;&#21495;&#12434;&#20184;&#19982;&#12375;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#12392;&#21516;&#27096;&#12395;&#25201;&#12431;&#12428;&#12414;&#12377;)</p>
  <p>(6)	&#23646;&#24615;&#21517;&#12398;&#21069;&#12395;&#12300;-&#12301;&#12434;&#20184;&#19982;&#12377;&#12427;&#12371;&#12392;&#12395;&#12424;&#12426;&#12289;id&#23646;&#24615;&#12398;&#20516;&#12364;sample_minus&#12391;&#12354;&#12427;&#12479;&#12464;&#12398;class&#23646;&#24615;&#12398;&#20516;&#12363;&#12425;&#12300;text&#12301;&#12434;&#21066;&#38500;&#12375;&#12390;&#20986;&#21147;&#12377;&#12427;&#12424;&#12358;&#12395;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#32080;&#26524;
  &#12300;&lt;span id="sample_minus" class="name"&gt;text&lt;/span&gt;&#12301;&#12364;&#20986;&#21147;&#12373;&#12428;&#12414;&#12377;&#12290;(&#23646;&#24615;&#20516;&#12398;&#21066;&#38500;&#12399;class&#23646;&#24615;&#12395;&#12398;&#12415;&#20316;&#29992;&#12375;&#12414;&#12377;&#12290;class&#23646;&#24615;&#20197;&#22806;&#12395;-&#35352;&#21495;&#12434;&#20184;&#19982;&#12375;&#12383;&#22580;&#21512;&#12289;
  &#23646;&#24615;&#12372;&#12392;&#21066;&#38500;&#12375;&#12414;&#12377;)</p>
  <p>(7)	&#21205;&#30340;&#12395;&#21029;&#12398;Snippet&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  <p>(8)	&#21205;&#30340;&#12395;&#21029;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12434;&#22475;&#12417;&#36796;&#12416;&#12371;&#12392;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  <p>(9)	CSS&#12475;&#12524;&#12463;&#12479;&#12392;&#12375;&#12390;&#12300;span(&#12479;&#12464;&#21517;)&#12301;&#12289;&#20986;&#21147;&#12377;&#12427;&#35201;&#32032;&#12392;&#12375;&#12390;&#24341;&#25968;value&#12398;&#20516;&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;render&#23646;&#24615;&#12434;&#25351;&#23450;&#12375;&#12383;&#12479;&#12464;&#12398;&#23376;&#35201;&#32032;&#12398;span&#12479;&#12464;&#12398;&#20869;&#23481;&#12434;&#12289;render&#23646;&#24615;&#12434;&#25351;&#23450;&#12375;&#12383;&#12479;&#12464;&#12398;value
  &#23646;&#24615;&#12398;&#20516;&#12395;&#32622;&#25563;&#12375;&#12390;&#20986;&#21147;&#12375;&#12414;&#12377;&#12290;</p>

  
  <p>&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12395;&#12399;jsoup&#12434;&#21033;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;CSS&#12475;&#12524;&#12463;&#12479;&#12398;&#35443;&#32048;&#12394;&#35352;&#27861;&#12399;jsoup API&#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;<a class="ulink" href="http://jsoup.org/apidocs/org/jsoup/select/Selector.html" target="_top">CSS Selector</a></p>

  <p>&#29305;&#27530;&#12394;Renderer&#12395;&#12388;&#12356;&#12390;&#65306;</p>
  
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>GothroughRenderer</p>
      <p>&#12381;&#12428;&#33258;&#20307;&#12399;&#20309;&#12418;&#12375;&#12394;&#12356; Renderer &#12391;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>ChildReplacer</p>
      <p>&#35442;&#24403;Element&#12398;&#23376;&#35201;&#32032;&#20840;&#12390;&#12434;&#32622;&#25563;&#12375;&#12414;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>ClearNode</p>
      <p>&#35442;&#24403;Element&#12434;&#21066;&#38500;&#12375;&#12414;&#12377;&#12290;&#12414;&#12383;&#12289;&#20219;&#24847;&#12398;&#12479;&#12464;&#12395;&#12300;afd:clear&#12301;&#12392;&#23459;&#35328;&#12377;&#12427;&#12371;&#12392;&#12391;&#12289;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#21069;&#12395;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12363;&#12425;&#21066;&#38500;&#12377;&#12427;&#12371;&#12392;&#12418;&#21487;&#33021;&#12391;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>ElementSetter</p>
      <p>&#35442;&#24403;Element&#12395;&#23550;&#12375;&#12390;&#20219;&#24847;&#12398;&#25805;&#20316;&#12364;&#12391;&#12365;&#12427;&#12452;&#12531;&#12479;&#12501;&#12455;&#12540;&#12473;&#12391;&#12377;&#12290;&#29305;&#27530;&#12394;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#21205;&#20316;&#12434;&#34892;&#12356;&#12383;&#12356;&#22580;&#21512;&#12395;&#12371;&#12398;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;&#12434;&#23455;&#35013;&#12375;&#12383;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12463;&#12521;&#12473;&#12434;&#20316;&#25104;&#12377;&#12427;&#12371;&#12392;&#12391;&#23455;&#29694;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>DebugRenderer</p>
      <p>Renderer#addDebuger(String selector)&#12391;DebugRenderer&#12434;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;DebugRenderer&#12395;&#23550;&#12375;&#12390;&#12289;&#35442;&#24403;Element&#12398;&#20869;&#23481;&#12434;logger&#12391;&#20986;&#21147;&#12375;&#12414;&#12377;&#12290;
      Selector&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#22580;&#21512;&#12289;snippet&#12513;&#12477;&#12483;&#12489;&#12434;&#23450;&#32681;&#12375;&#12383;Element&#12434;&#20986;&#21147;&#23550;&#35937;&#12392;&#12375;&#12414;&#12377;&#12290;</p>
    </li><li class="listitem">
      <p>&#20219;&#24847;&#12487;&#12540;&#12479;&#22411;&#12398;&#23646;&#24615;&#35373;&#23450;</p>
      <p>&#23646;&#24615;&#12434;&#35373;&#23450;&#12377;&#12427;&#38555;&#12289;String&#12289;long, int, boolean&#12399;String&#12392;&#12375;&#12390;&#12289;&#12381;&#12398;&#12414;&#12414;&#35442;&#24403;Element&#12398;&#23646;&#24615;&#12395;&#35373;&#23450;&#12375;&#12414;&#12377;&#12364;&#12289;&#12381;&#12398;&#20197;&#22806;&#12398;&#12487;&#12540;&#12479;&#22411;&#12398;&#35373;&#23450;&#12418;&#21487;&#33021;&#12391;&#12377;&#12290;&#20869;&#37096;&#12399;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12398;&#12522;&#12501;&#12449;&#12524;&#12531;&#12473;&#12434;&#20445;&#25345;&#12375;&#12390;&#12289;
      Snippet&#12513;&#12477;&#12483;&#12489;&#12398;&#22793;&#25968;&#12395;&#33258;&#21205;&#36969;&#29992;&#12375;&#12414;&#12377;&#65288;ContextData&#12434;&#21442;&#29031;&#65289;&#12290;</p>
    </li></ul></div>
</div>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="request_handler"></a>6.&nbsp;Request Handler</h2></div></div></div>
  

  <p>View&#12398;&#34920;&#31034;&#21069;&#12395;&#20966;&#29702;&#12434;&#34892;&#12356;&#12383;&#12356;&#22580;&#21512;&#12395;&#20351;&#29992;&#12375;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> GenericController <span class="hl-keyword">extends</span> GenericControllerBase {
  <em><span class="hl-annotation" style="color: gray">@Override</span></em>
  <span class="hl-keyword">protected</span> <span class="hl-keyword">void</span> initUrlMappingRules(UrlMappingRuleHelper rules) {
    rules.add(HttpMethod.POST, <span class="hl-string">"/login/{id}"</span>, LoginHandler.<span class="hl-keyword">class</span>);  <span class="hl-comment">// (1)</span>
  }
}




  </pre>
  
  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> LoginHandler {
  <em><span class="hl-annotation" style="color: gray">@RequestHandler</span></em> <span class="hl-comment">// (2)</span>
  <span class="hl-keyword">public</span> String doLogin(
    <em><span class="hl-annotation" style="color: gray">@ContextData(scope=WebApplicationContext.SCOPE_PATHVAR)</span></em> String id) {
    <span class="hl-comment">// &#12525;&#12464;&#12452;&#12531;&#20966;&#29702;&#12398;&#23455;&#34892;(&#30465;&#30053;)</span>
    <span class="hl-keyword">return</span> <span class="hl-string">"/mypage.html"</span>;
  }
}




  </pre>  

  <p>(1)	&#12300;/login/&lt;&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;&gt;&#12301;&#12408;&#12398; POST &#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#12289;Request Handler &#12392;&#12375;&#12390;LoginHandler &#12434;&#20351;&#29992;&#12375;&#12289;URL&#12395;&#21547;&#12414;&#12428;&#12427;&lt;&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;&gt;&#12434;&#22793;&#25968;&#12300;id&#12301;&#12395;&#26684;&#32013;&#12377;&#12427;&#12371;&#12392;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
  <p>(2)	&#12300;/login/&lt;&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;&gt;&#12301;&#12408;&#12398; POST &#12522;&#12463;&#12456;&#12473;&#12488;&#26178;&#12395;doLogin&#12513;&#12477;&#12483;&#12489;&#12434;&#23455;&#34892;&#12375;&#12289;&#12381;&#12398;&#24460;mypage.html&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#29992;&#12375;&#12390;View&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12434;&#23455;&#34892;&#12375;&#12414;&#12377;&#12290;&#24341;&#25968;&#12300;id&#12301;&#12392;&#12375;&#12390;&#12289;URL&#12395;&#21547;&#12414;&#12428;&#12427;&lt;&#20219;&#24847;&#12398;&#25991;&#23383;&#21015;&gt;&#12434;&#12513;&#12477;&#12483;&#12489;&#20869;&#12391;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

  <p>&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;&#12392;Flash&#12473;&#12467;&#12540;&#12503;&#65306;&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;&#12395;&#12424;&#12426;&#30011;&#38754;&#36983;&#31227;&#12434;&#34892;&#12358;&#22580;&#21512;&#12289;Flash&#12473;&#12467;&#12540;&#12503;&#12395;&#35373;&#23450;&#12375;&#12383;&#20516;&#12434;&#21463;&#12369;&#28193;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> RedirectSampleHandler {

    <em><span class="hl-annotation" style="color: gray">@RequestHandler</span></em>
    <span class="hl-keyword">public</span> Object redirect(String name, String age, String bloodtype) {
        Map&lt;String, Object&gt; flashScopeData = <span class="hl-keyword">new</span> HashMap&lt;&gt;();
        flashScopeData.put(<span class="hl-string">"name"</span>, name);
        flashScopeData.put(<span class="hl-string">"age"</span>, age);
        flashScopeData.put(<span class="hl-string">"bloodtype"</span>, bloodtype);
        <span class="hl-keyword">return</span> <span class="hl-keyword">new</span> RedirectView(<span class="hl-string">"/profile/input"</span>, flashScopeData); <span class="hl-comment">// (3)</span>
    }
}





  </pre> 
  
  <p>(3)	RedirectView &#12398;&#31532;&#19968;&#24341;&#25968;&#12395;&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;&#20808;&#12398; url &#12434;&#12289;&#31532;&#20108;&#24341;&#25968;&#12395;Flash&#12473;&#12467;&#12540;&#12503;&#12395;&#35373;&#23450;&#12377;&#12427;&#20516;&#12398;Map&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;&#12300;/profile/input&#12301;&#12395;&#35373;&#23450;&#12373;&#12428;&#12383; Request Handler &#12362;&#12424;&#12403;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12391;&#25351;&#23450;&#12375;&#12383; Snippet &#20869;&#12391;&#12289;Flash &#12473;&#12467;&#12540;&#12503;&#12395;&#35373;&#23450;&#12375;&#12383;&#20516;&#12434;&#21442;&#29031;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

</div>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="interceptor"></a>7.&nbsp;Interceptor</h2></div></div></div>
  

  <p>Request Interceptor(&#35201;&#35036;&#36275;)</p>
  
  <p>Page Interceptor</p>
  
  <p>&#12506;&#12540;&#12472;&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#20966;&#29702;&#21069;&#24460;&#12395;&#20966;&#29702;&#12434;&#34892;&#12356;&#12383;&#12356;&#22580;&#21512;&#12395;&#20351;&#29992;&#12375;&#12414;&#12377;&#12290;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;PageInterceptor&#12434;&#23455;&#35013;&#12375;&#12383;&#12463;&#12521;&#12473;&#12434;Configuration#setPageInterceptorList()&#12391;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> SamplePageInterceptor <span class="hl-keyword">implements</span> PageInterceptor {
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> prePageRendering(Renderer renderer) { <span class="hl-comment">// (1)</span>
        <span class="hl-comment">// &#12506;&#12540;&#12472;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#21069;&#12398;&#20966;&#29702;(&#30465;&#30053;)</span>
    }

    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> postPageRendering(Renderer renderer) { <span class="hl-comment">// (2)</span>
        <span class="hl-comment">// &#12506;&#12540;&#12472;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#24460;&#12398;&#20966;&#29702;(&#30465;&#30053;)</span>
    }
}




  </pre>

  <p>(1)	&#12506;&#12540;&#12472;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#21069;&#12395;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;</p>
  <p>(2)	&#12506;&#12540;&#12472;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#24460;&#12395;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;prePageRendering&#12362;&#12424;&#12403;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#20966;&#29702;&#12391;&#20363;&#22806;&#12364;&#30330;&#29983;&#12375;&#12383;&#22580;&#21512;&#12289;&#23455;&#34892;&#12373;&#12428;&#12414;&#12379;&#12435;&#12290;</p>

  <p>Snippet Interceptor</p>
  <p>Snippet&#12398;&#12513;&#12477;&#12483;&#12489;&#23455;&#34892;&#21069;&#24460;&#12395;&#20966;&#29702;&#12434;&#34892;&#12356;&#12383;&#12356;&#22580;&#21512;&#12395;&#20351;&#29992;&#12375;&#12414;&#12377;&#12290;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;SnippetInterceptor&#12434;&#23455;&#35013;&#12375;&#12383;&#12463;&#12521;&#12473;&#12434;
  DefaultSnippetInvoker.setSnippetInterceptorList ()&#12391;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;</p>

  <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> SampleSnippetInterceptor <span class="hl-keyword">implements</span> SnippetInterceptor {
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">public</span> <span class="hl-keyword">boolean</span> beforeProcess( <span class="hl-comment">// (1)</span>
            SnippetExecutionHolder executionHolder) <span class="hl-keyword">throws</span> Exception {
        <span class="hl-comment">// Snippet&#12513;&#12477;&#12483;&#12489;&#23455;&#34892;&#21069;&#12398;&#20966;&#29702;(&#30465;&#30053;)</span>
        <span class="hl-keyword">return</span> true;
    }

    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> afterProcess( <span class="hl-comment">// (2)</span>
            SnippetExecutionHolder executionHolder, ExceptionHandler exceptionHandler) {
        <span class="hl-comment">// Snippet&#12513;&#12477;&#12483;&#12489;&#23455;&#34892;&#24460;&#12398;&#20966;&#29702;(&#30465;&#30053;)</span>
    }
}





  </pre> 
  
  <p>(1)	Snippet&#12513;&#12477;&#12483;&#12489;&#23455;&#34892;&#21069;&#12395;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;&#25147;&#12426;&#20516;&#12392;&#12375;&#12390;false&#12434;&#36820;&#12377;&#12392;Snippet&#12513;&#12477;&#12483;&#12489;&#12362;&#12424;&#12403;afterProcess&#12399;&#23455;&#34892;&#12373;&#12428;&#12414;&#12379;&#12435;&#12290;</p>
  <p>(2)	Snippet&#12513;&#12477;&#12483;&#12489;&#23455;&#34892;&#24460;&#12395;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;ExceptionHandler&#12391;breforePrcess&#12418;&#12375;&#12367;&#12399;snippet&#12513;&#12477;&#12483;&#12489;&#12398;&#23455;&#34892;&#20013;&#12395;&#30330;&#29983;&#12375;&#12383;&#20363;&#22806;&#12398;&#24773;&#22577;&#12434;&#25345;&#12387;&#12390;&#12362;&#12426;&#12289;ExceptionHandler#setException(null)
  &#12434;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12424;&#12426;&#20363;&#22806;&#12434;&#21462;&#12426;&#28040;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#21462;&#12426;&#28040;&#12375;&#12434;&#34892;&#12431;&#12394;&#12356;&#22580;&#21512;&#12289;afterProcess&#23455;&#34892;&#24460;&#12395;&#12371;&#12398;&#20363;&#22806;&#12399;&#19978;&#12395;&#25237;&#12370;&#12425;&#12428;&#12414;&#12377;&#12290;</p>
  
</div>
      
      <div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="contextdata"></a>8.&nbsp;ContextData&#12392;&#22793;&#25968;&#27880;&#20837;</h2></div></div></div>
  

  <p>Snippet&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12289;&#12362;&#12424;&#12403;Request Handler&#12398;&#12495;&#12531;&#12489;&#12523;&#12513;&#12477;&#12483;&#12489;&#12391;&#22793;&#25968;&#12392;&#12375;&#12390;&#25201;&#12358;&#12487;&#12540;&#12479;&#12395;&#12388;&#12356;&#12390;&#23450;&#32681;&#12377;&#12427;&#12450;&#12494;&#12486;&#12540;&#12471;&#12519;&#12531;&#12391;&#12377;&#12290;&#22793;&#25968;&#12398;&#21517;&#21069;&#12420;&#12473;&#12467;&#12540;&#12503;&#12394;&#12393;&#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
  
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>Snipet&#12418;&#12375;&#12367;&#12399;RequestHandler&#12398;&#12513;&#12477;&#12483;&#12489;&#12395;&#27880;&#20837;&#12377;&#12427;</p>
      <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> ContextDataSampleSnippet {
  <span class="hl-comment">// (1)</span>
  <span class="hl-keyword">public</span> Renderer getPathVarName(
      <em><span class="hl-annotation" style="color: gray">@ContextData(name = "count", scope = WebApplicationContext.SCOPE_PATHVAR)</span></em>
      <span class="hl-keyword">int</span> count) {
  }

  <span class="hl-comment">// (2)</span>
  <span class="hl-keyword">public</span> Renderer getQueryParamName(
      <em><span class="hl-annotation" style="color: gray">@ContextData(name = "var", scope = WebApplicationContext.SCOPE_QUERYPARAM)</span></em>
      String name) {
  }

  <span class="hl-comment">// (3)</span>
  <span class="hl-keyword">public</span> Renderer getDefaultName(String name) {
  }
}



       </pre>
       <p>(1)	GenericController#initUrlMappingRules()&#12391;&#12300;/xxx/{count}&#12301;&#12392;&#23459;&#35328;&#12375;&#12497;&#12473;&#22793;&#25968;&#12395;&#26684;&#32013;&#12375;&#12383;&#20516;&#12434;&#24341;&#25968;&#12300;count&#12301;&#12392;&#12375;&#12390;&#25201;&#12358;&#12424;&#12358;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
       (&#12487;&#12540;&#12479;&#22411;&#12434; int &#12395;&#33258;&#21205;&#22793;&#25563;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;)</p>
       <p>(2)	&#12522;&#12463;&#12456;&#12473;&#12488;&#12497;&#12521;&#12513;&#12540;&#12479;&#12300;xxx.html?var=xxx&#12301;&#12392;&#12375;&#12390;&#28193;&#12373;&#12428;&#12383;&#20516;&#12434;&#24341;&#25968;&#12300;name&#12301;&#12392;&#12375;&#12390;&#25201;&#12358;&#12424;&#12358;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
       <p>(3)	ContextData&#12450;&#12494;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12394;&#12356;&#12383;&#12417;&#12289;&#26368;&#12418;&#29421;&#12356;&#12473;&#12467;&#12540;&#12503;&#12363;&#12425;&#38918;&#30058;&#12395;&#22793;&#25968;&#21517;&#12300;name&#12301;&#12392;&#19968;&#33268;&#12377;&#12427;&#20516;&#12434;&#25506;&#12375;&#12289;&#24341;&#25968;&#12392;&#12375;&#12390;&#25201;&#12356;&#12414;&#12377;&#12290;</p>       
    </li><li class="listitem">
      <p>Snippet&#12398;&#12501;&#12451;&#12540;&#12523;&#12489;&#12395;&#27880;&#20837;&#12392;&#21021;&#26399;&#21270;(InitializableSnippet)</p>
      <pre class="programlisting">


<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> InitSnippet <span class="hl-keyword">implements</span> InitializableSnippet {

        <em><span class="hl-annotation" style="color: gray">@ContextData</span></em>
        <span class="hl-keyword">private</span> String value; <span class="hl-comment">// (1)</span>
        <span class="hl-keyword">private</span> <span class="hl-keyword">long</span> id;
        <span class="hl-keyword">private</span> String resolvedValue;
        <span class="hl-keyword">private</span> <span class="hl-keyword">int</span> count = <span class="hl-number">0</span>;

        <em><span class="hl-annotation" style="color: gray">@Override</span></em>
        <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> init() <span class="hl-keyword">throws</span> SnippetInvokeException { <span class="hl-comment">//(2)</span>
            resolvedValue = value + <span class="hl-string">"-resolved"</span>;
            count++;
        }
        <em><span class="hl-annotation" style="color: gray">@ContextData</span></em>
        <span class="hl-keyword">private</span> <span class="hl-keyword">void</span> setId(<span class="hl-keyword">long</span> id) {&#12288;<span class="hl-comment">//(3)</span>
            <span class="hl-keyword">this</span>.id = id;
        }
        <span class="hl-keyword">public</span> Renderer render_<span class="hl-number">1</span>() {
            <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">".value"</span>, resolvedValue)
                           .add(<span class="hl-string">".count"</span>, count);
        }
        <span class="hl-keyword">public</span> Renderer render_<span class="hl-number">2</span>() {
            <span class="hl-keyword">return</span> Renderer.create(<span class="hl-string">".value"</span>, resolvedValue)
                           .add(<span class="hl-string">".count"</span>, count);
        }
    }



       </pre>
       <p>(1)	&#27598;&#22238;Snippet&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12373;&#12428;&#12390;&#12356;&#12427;&#21069;&#12395;&#12289;@Context&#12391;&#23459;&#35328;&#12375;&#12390;&#12356;&#12427;&#12501;&#12451;&#12540;&#12523;&#12489;&#12434;Context&#12363;&#12425;&#12398;&#20516;&#12391;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;</p>
       <p>(2)	Snippet&#12463;&#12521;&#12473;&#12398;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12399;Request&#12372;&#12392;&#12395;Singleton&#12395;&#12394;&#12387;&#12390;&#12362;&#12426;&#12289;&#21021;&#12417;&#12390;&#21628;&#12400;&#12428;&#12390;&#12356;&#12427;&#22580;&#21512;&#12289;&#12363;&#12388;&#12289;InitializableSnippet&#12452;&#12531;&#12479;&#12501;&#12455;&#12540;&#12473;&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12427;&#22580;&#21512;&#12289;init&#12513;&#12477;&#12483;&#12489;&#12364;&#19968;&#22238;&#21628;&#12400;&#12428;&#12414;&#12377;&#12290;</p>
       <p>(3)	setter&#12391;&#12418;&#23459;&#35328;&#12377;&#12427;&#12371;&#12392;&#12364;&#21487;&#33021;&#12391;&#12377;&#12290;</p>  
        
        <p>&#12522;&#12496;&#12540;&#12473;&#27880;&#20837;</p>
        <pre class="programlisting">


    <span class="hl-keyword">public</span> <span class="hl-keyword">class</span> InitSnippet <span class="hl-keyword">implements</span> InitializableSnippet {
    <em><span class="hl-annotation" style="color: gray">@ContextData(scope = WebApplicationContext.SCOPE_REQUEST, 
reverse = true)</span></em>
    <span class="hl-keyword">private</span> String reverseTest;
    }


       </pre> 
       <p>&#12501;&#12451;&#12540;&#12523;&#12489;&#12418;&#12375;&#12367;&#12399;getter&#12513;&#12477;&#12483;&#12489;&#12391;@Context&#12391;&#26126;&#31034;&#30340;&#12395;Request&#12473;&#12467;&#12540;&#12503;&#12434;&#25351;&#23450;&#12375;&#12390;reverse&#12434;true&#12395;&#35373;&#23450;&#12377;&#12428;&#12400;&#12289;snippet&#12513;&#12477;&#12483;&#12489;&#12398;&#23455;&#34892;&#12364;&#23436;&#20102;&#12375;&#12383;&#24460;&#12395;&#12289;
       &#35442;&#24403;&#12501;&#12451;&#12540;&#12523;&#12489;&#12398;&#20516;&#12434;&#36870;&#12395;Context&#12395;&#33258;&#21205;&#20445;&#23384;&#12375;&#12414;&#12377;&#12290;</p>
    </li><li class="listitem">
        <p>&#22793;&#25968;&#12473;&#12467;&#12540;&#12503;&#12398;&#33258;&#21205;&#12469;&#12540;&#12481;&#12395;&#12388;&#12356;&#12390;</p>
        <p>@ContextData&#12391;&#12473;&#12467;&#12540;&#12503;&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#12289;&#29305;&#23450;&#12398;&#38918;&#30058;&#12391;&#12469;&#12540;&#12481;&#12375;&#12414;&#12377;&#12290;HTML&#12479;&#12464;&#12398;&#23646;&#24615;(snippet&#12434;&#23459;&#35328;&#12375;&#12390;&#12356;&#12427;&#35442;&#24403;Element&#12363;&#12425;&#19968;&#30058;&#22806;&#20596;&#12398;&#35242;Element&#12414;&#12391;&#25506;&#12377;&#12289;
        Snippet&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12398;&#12415;&#26377;&#21177;)&#12539;&#12497;&#12473;&#22793;&#25968;&#12539;&#12522;&#12463;&#12456;&#12473;&#12488;&#12497;&#12521;&#12513;&#12540;&#12479;&#12539;Flash&#12473;&#12467;&#12540;&#12503;&#22793;&#25968;&#12539;&#12463;&#12483;&#12461;&#12540;&#12539;&#12522;&#12463;&#12456;&#12473;&#12488;&#12504;&#12483;&#12480;&#12539;&#12522;&#12463;&#12456;&#12473;&#12488;&#22793;&#25968;&#12539;&#12475;&#12483;&#12471;&#12519;&#12531;&#12539;&#12464;&#12525;&#12540;&#12496;&#12523;&#22793;&#25968;&#12398;&#38918;&#12391;&#12377;&#12290;(&#12371;&#12371;&#12391;&#12398;&#12522;&#12463;&#12456;&#12473;&#12488;
        &#22793;&#25968;&#12539;&#12464;&#12525;&#12540;&#12496;&#12523;&#22793;&#25968;&#12392;&#12399;&#12289;Context.setData()&#12363;&#12425;&#35373;&#23450;&#12375;&#12390;&#20351;&#29992;&#12377;&#12427;&#20516;&#12391;&#12377;)&#12290;&#12414;&#12383;&#12289;&#12371;&#12398;&#38918;&#30058;&#12399; DefaultContextDataFinder#setDataSearchScopeOrder() 
        &#12391;&#20219;&#24847;&#12395;&#22793;&#26356;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
    </li></ul></div>

</div>
    </div>
  </div>  
  
</div></body></html>